<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>backbone.indexeddb Tests</title>
    <link rel="stylesheet" href="../lib/qunit.css">
</head>
<body>
    <div id="qunit"></div>
    <div id="qunit-fixture"></div>
    <script src="../lib/qunit.js"></script>
    <script src="../lib/jquery.min.js"></script>
    <script src="../lib/underscore-min.js" type="text/javascript"></script>
    <script src="../lib/backbone-min.js" type="text/javascript"></script>
    <script src="../backbone-indexeddb.js" type="text/javascript"></script>
    <script>
    var log = [];
    var testName;
    QUnit.done = function (test_results) {
        var tests = log.map(function(details){
            return {
                name: details.name,
                result: details.result,
                expected: details.expected,
                actual: details.actual,
                source: details.source
            }
        });
        test_results.tests = tests;

        // delaying results a bit cause in real-world
        // scenario you won't get them immediately
        setTimeout(function () { window.global_test_results = test_results; }, 2000);
    };
    QUnit.testStart(function(testDetails){
        QUnit.log = function(details){
            if (!details.result) {
                details.name = testDetails.name;
                log.push(details);
            }
        }
    });
    </script>
    <script src="test.js" type="text/javascript"></script>
</body>
</html>