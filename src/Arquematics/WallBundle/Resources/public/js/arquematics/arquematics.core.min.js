jQuery.fn.focusTextToEnd=function(){this.focus();var t=this.val();return this.val("").val(t),this};var arquematics=function(t){return t.mime={mimeTypesMap:{323:["text/h323"],epub:["application/epub+zip"],aac:["audio/aac"],abw:["application/abiword"],acx:["application/internet-property-stream"],ai:["application/illustrator"],aif:["audio/aiff","audio/aifc","audio/x-aiff"],aifc:["audio/aiff","audio/aifc","audio/x-aiff"],aiff:["audio/aiff","audio/aifc","audio/x-aiff"],asf:["video/x-ms-asf"],asp:["application/x-asp","text/asp"],asr:["video/x-ms-asf"],asx:["video/x-ms-asf"],au:["audio/basic","audio/au","audio/x-au","audio/x-basic"],avi:["video/avi","application/x-troff-msvideo","image/avi","video/msvideo","video/x-msvideo","video/xmpg2"],axs:["application/olescript"],bas:["text/plain"],bin:["application/octet-stream","application/bin","application/binary","application/x-msdownload"],bmp:["image/bmp","application/bmp","application/x-bmp","image/ms-bmp","image/x-bitmap","image/x-bmp","image/x-ms-bmp","image/x-win-bitmap","image/x-windows-bmp","image/x-xbitmap"],bz2:["application/x-bzip2","application/bzip2","application/x-bz2","application/x-bzip"],c:["text/x-csrc"],"c++":["text/x-c++src"],cab:["application/vndms-cab-compressed","application/cab","application/x-cabinet"],cat:["application/vndms-pkiseccat"],cct:["application/x-director"],cdf:["application/cdf","application/x-cdf","application/netcdf","application/x-netcdf","text/cdf","text/x-cdf"],cer:["application/x-x509-ca-cert","application/pkix-cert","application/x-pkcs12","application/keychain_access"],cfc:["application/x-cfm"],cfm:["application/x-cfm"],class:["application/x-java","application/java","application/java-byte-code","application/java-vm","application/x-java-applet","application/x-java-bean","application/x-java-class","application/x-java-vm","application/x-jinit-bean","application/x-jinit-applet"],clp:["application/x-msclip"],cmx:["image/x-cmx","application/cmx","application/x-cmx","drawing/cmx","image/x-cmx"],cod:["image/cis-cod"],cp:["text/x-c++src"],cpio:["application/x-cpio"],cpp:["text/x-c++src","text/x-c"],crd:["application/x-mscardfile"],crt:["application/x-x509-ca-cert","application/pkix-cert","application/x-pkcs12","application/keychain_access"],crl:["application/pkix-crl"],csh:["application/x-csh"],css:["text/css","application/css-stylesheet"],cst:["application/x-director"],csv:["text/csv","application/csv","text/comma-separated-values","text/x-comma-separated-values"],cxt:["application/x-director"],dcr:["application/x-director"],der:["application/x-x509-ca-cert","application/pkix-cert","application/x-pkcs12","application/keychain_access"],dib:["image/bmp","application/bmp","application/x-bmp","image/ms-bmp","image/x-bitmap","image/x-bmp","image/x-ms-bmp","image/x-win-bitmap","image/x-windows-bmp","image/x-xbitmap"],diff:["text/x-patch"],dir:["application/x-director"],dll:["application/x-msdownload","application/octet-stream","application/x-msdos-program"],dms:["application/octet-stream"],doc:["application/vndms-word","application/doc","application/msword","application/msword-doc","application/vndmsword","application/winword","application/word","application/x-msw6","application/x-msword","application/x-msword-doc"],docm:["application/vnd.ms-word.document.macroEnabled.12"],docx:["application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.ms-word.document.12","application/vnd.openxmlformats-officedocument.word"],dot:["application/msword"],dotm:["application/vnd.ms-word.template.macroEnabled.12"],dotx:["application/vnd.openxmlformats-officedocument.wordprocessingml.template"],dta:["application/x-stata"],dv:["video/x-dv"],dvi:["application/x-dvi"],dwg:["image/x-dwg","application/acad","application/autocad_dwg","application/dwg","application/x-acad","application/x-autocad","application/x-dwg","image/vnddwg"],dxf:["application/x-autocad","application/dxf","application/x-dxf","drawing/x-dxf","image/vnddxf","image/x-autocad","image/x-dxf"],dxr:["application/x-director"],elc:["application/x-elc"],eml:["message/rfc822"],enl:["application/x-endnote-library","application/x-endnote-refer"],enz:["application/x-endnote-library","application/x-endnote-refer"],eps:["application/postscript","application/eps","application/x-eps","image/eps","image/x-eps"],etx:["text/x-setext","text/anytext"],evy:["application/envoy","application/x-envoy"],exe:["application/x-msdos-program","application/dos-exe","application/exe","application/msdos-windows","application/x-sdlc","application/x-exe","application/x-winexe"],fif:["application/fractals","image/fif"],flr:["x-world/x-vrml"],fm:["application/vndframemaker","application/framemaker","application/maker","application/vndmif","application/x-framemaker","application/x-maker","application/x-mif"],fqd:["application/x-director"],gif:["image/gif"],gtar:["application/tar","application/x-gtar","application/x-tar"],gz:["application/gzip","application/gzip-compressed","application/gzipped","application/x-gunzip","application/x-gzip"],h:["text/x-chdr"],hdf:["application/x-hdf"],hlp:["application/winhlp","application/x-helpfile","application/x-winhelp"],hqx:["application/binhex","application/mac-binhex","application/mac-binhex40"],hta:["application/hta"],htc:["text/x-component"],htm:["text/html","application/xhtml+xml"],html:["text/html","application/xhtml+xml"],htt:["text/webviewhtml"],ico:["image/x-ico"],ics:["text/calendar"],ief:["image/ief"],iii:["application/x-iphone"],indd:["application/x-indesign"],ins:["application/x-internet-signup"],isp:["application/x-internet-signup"],jad:["text/vndsunj2meapp-descriptor"],jar:["application/java-archive"],java:["text/x-java","java/*","text/java","text/x-java-source"],jfif:["image/jpeg","image/pjpeg"],jpe:["image/jpeg","image/pjpeg"],jpeg:["image/jpeg","image/pjpeg"],jpg:["image/jpeg","image/pjpeg"],jp2:["image/jp2"],fh:["image/x-freehand"],fhc:["image/x-freehand"],fh4:["image/x-freehand"],fh5:["image/x-freehand"],fh7:["image/x-freehand"],svgz:["image/svg+xml"],svg:["image/svg+xml"],jpx:["image/jp2"],xcf:["image/x-xcf"],djvu:["image/vnd.djvu"],djv:["image/vnd.djvu"],js:["text/javascript","application/javascript","application/x-javascript","application/x-js"],kml:["application/vndgoogle-earthkml+xml"],kmz:["application/vndgoogle-earthkmz"],latex:["application/x-latex","text/x-latex"],lha:["application/x-lha","application/lha","application/lzh","application/x-lzh","application/x-lzh-archive"],lib:["application/x-endnote-library","application/x-endnote-refer"],llb:["application/x-labview","application/x-labview-vi"],log:["text/x-log"],lsf:["video/x-la-asf"],lsx:["video/x-la-asf"],lvx:["application/x-labview-exec"],lzh:["application/x-lha","application/lha","application/lzh","application/x-lzh","application/x-lzh-archive"],m:["text/x-objcsrc"],m1v:["video/mpeg"],m2v:["video/mpeg"],m3u:["audio/x-mpegurl","application/x-winamp-playlist","audio/mpegurl","audio/mpeg-url","audio/playlist","audio/scpls","audio/x-scpls"],m4a:["audio/m4a","audio/x-m4a"],m4v:["video/mp4","video/mpeg4","video/x-m4v"],ma:["application/mathematica"],mail:["message/rfc822"],man:["application/x-troff-man"],mcd:["application/x-mathcad","application/mcad"],mdb:["application/vndms-access","application/mdb","application/msaccess","application/vndmsaccess","application/x-mdb","application/x-msaccess"],me:["application/x-troff-me"],mfp:["application/x-shockwave-flash","application/futuresplash"],mht:["message/rfc822"],mhtml:["message/rfc822"],mid:["audio/x-midi","application/x-midi","audio/mid","audio/midi","audio/soundtrack"],midi:["audio/x-midi","application/x-midi","audio/mid","audio/midi","audio/soundtrack"],mif:["application/vndframemaker","application/framemaker","application/maker","application/vndmif","application/x-framemaker","application/x-maker","application/x-mif"],mny:["application/x-msmoney"],mov:["video/quicktime"],mp2:["video/mpeg","audio/mpeg","audio/x-mpeg","audio/x-mpeg-2","video/x-mpeg","video/x-mpeq2a"],mp3:["audio/mpeg","audio/mp3","audio/mpeg3","audio/mpg","audio/x-mp3","audio/x-mpeg","audio/x-mpeg3","audio/x-mpg"],mpa:["video/mpeg"],mpe:["video/mpeg"],mpeg:["video/mpeg"],mpg:["video/mpeg"],mpp:["application/vndms-project","application/mpp","application/msproj","application/msproject","application/x-dos_ms_project","application/x-ms-project","application/x-msproject"],mpv2:["video/mpeg"],mqv:["video/quicktime"],ms:["application/x-troff-ms"],mvb:["application/x-msmediaview"],mws:["application/x-maple","application/maple-v-r4"],nb:["application/mathematica"],nws:["message/rfc822"],oda:["application/oda"],odc:["application/vnd.oasis.opendocument.chart"],odf:["application/vnd.oasis.opendocument.formula"],odg:["application/vnd.oasis.opendocument.graphics"],odp:["application/vnd.oasis.opendocument.presentation"],ods:["application/vnd.oasis.opendocument.spreadsheet"],ots:["application/vnd.oasis.opendocument.spreadsheet-template"],ott:["application/vnd.oasis.opendocument.text-template"],odt:["application/vnd.oasis.opendocument.text"],ogg:["application/ogg","application/x-ogg","audio/x-ogg"],one:["application/msonenote"],p12:["application/x-x509-ca-cert","application/pkix-cert","application/x-pkcs12","application/keychain_access"],patch:["text/x-patch"],pbm:["image/x-portable-bitmap","image/pbm","image/portable-bitmap","image/x-pbm"],pcd:["image/x-photo-cd","image/pcd"],pct:["image/x-pict","image/pict","image/x-macpict"],pdf:["application/pdf","application/acrobat","application/nappdf","application/x-pdf","application/vndpdf","text/pdf","text/x-pdf"],pfx:["application/x-pkcs12"],pgm:["image/x-portable-graymap","image/x-pgm"],php:["application/x-php","application/php","text/php","text/x-php"],pic:["image/x-pict","image/pict","image/x-macpict"],pict:["image/x-pict","image/pict","image/x-macpict"],pjpeg:["image/jpeg","image/pjpeg"],pl:["application/x-perl","text/x-perl"],pls:["audio/x-mpegurl","application/x-winamp-playlist","audio/mpegurl","audio/mpeg-url","audio/playlist","audio/scpls","audio/x-scpls"],pko:["application/yndms-pkipko"],pm:["application/x-perl","text/x-perl"],pmc:["application/x-perfmon"],png:["image/png","image/x-png"],pnm:["image/x-portable-anymap"],pod:["text/x-pod"],potm:["application/vndms-powerpointtemplatemacroEnabled12"],potx:["application/vndopenxmlformats-officedocumentpresentationmltemplate"],ppam:["application/vndms-powerpointaddinmacroEnabled12"],ppm:["image/x-portable-pixmap","application/ppm","application/x-ppm","image/x-ppm"],pps:["application/vndms-powerpoint","application/ms-powerpoint","application/mspowerpoint","application/powerpoint","application/ppt","application/vnd-mspowerpoint","application/vnd_ms-powerpoint","application/x-mspowerpoint","application/x-powerpoint"],ppsm:["application/vnd.ms-powerpoint.slideshow.macroEnabled.12"],ppsx:["application/vnd.openxmlformats-officedocument.presentationml.slideshow"],ppt:["application/vnd.ms-powerpoint","application/ms-powerpoint","application/mspowerpoint","application/powerpoint","application/ppt","application/vnd-mspowerpoint","application/vnd_ms-powerpoint","application/x-mspowerpoint","application/x-powerpoint"],pptm:["application/vnd.ms-powerpoint.presentation.macroEnabled.12"],pptx:["application/vnd.openxmlformats-officedocument.presentationml.presentation"],prf:["application/pics-rules"],ps:["application/postscript","application/eps","application/x-eps","image/eps","image/x-eps"],psd:["application/photoshop","application/psd","application/x-photoshop","image/photoshop","image/psd","image/x-photoshop","image/x-psd"],pub:["application/vndms-publisher","application/x-mspublisher"],py:["text/x-python"],qt:["video/quicktime"],ra:["audio/vndrn-realaudio","audio/vndpn-realaudio","audio/x-pn-realaudio","audio/x-pn-realaudio-plugin","audio/x-pn-realvideo","audio/x-realaudio"],ram:["audio/vndrn-realaudio","audio/vndpn-realaudio","audio/x-pn-realaudio","audio/x-pn-realaudio-plugin","audio/x-pn-realvideo","audio/x-realaudio"],rar:["application/rar","application/x-rar-compressed"],ras:["image/x-cmu-raster"],rgb:["image/x-rgb","image/rgb"],rm:["application/vndrn-realmedia"],rmi:["audio/mid"],roff:["application/x-troff"],rpm:["audio/vndrn-realaudio","audio/vndpn-realaudio","audio/x-pn-realaudio","audio/x-pn-realaudio-plugin","audio/x-pn-realvideo","audio/x-realaudio"],rtf:["application/rtf","application/richtext","application/x-rtf","text/richtext","text/rtf"],rtx:["application/rtf","application/richtext","application/x-rtf","text/richtext","text/rtf"],rv:["video/vndrn-realvideo","video/x-pn-realvideo"],sas:["application/sas","application/x-sas","application/x-sas-data","application/x-sas-log","application/x-sas-output"],sav:["application/spss"],scd:["application/x-msschedule"],scm:["text/x-scriptscheme","text/x-scheme"],sct:["text/scriptlet"],sd2:["application/spss"],sea:["application/x-sea"],sh:["application/x-sh","application/x-shellscript"],shar:["application/x-shar"],shtml:["text/html","application/xhtml+xml"],sit:["application/stuffit","application/x-sit","application/x-stuffit"],smil:["application/smil","application/smil+xml"],snd:["audio/basic","audio/au","audio/x-au","audio/x-basic"],spl:["application/x-shockwave-flash","application/futuresplash"],spo:["application/spss"],sql:["text/x-sql","text/sql"],src:["application/x-wais-source"],sst:["application/vndms-pkicertstore"],stl:["application/sla"],stm:["text/html"],swa:["application/x-director"],swf:["application/x-shockwave-flash","application/futuresplash"],sxw:["application/vndsunxmlwriter"],t:["application/x-troff"],tar:["application/tar","application/x-gtar","application/x-tar"],tcl:["application/x-tcl","text/x-scripttcl","text/x-tcl"],tex:["application/x-tex","text/x-tex"],tga:["image/x-targa","application/tga","application/x-targa","application/x-tga","image/targa","image/tga","image/x-tga"],tgz:["application/gzip","application/gzip-compressed","application/gzipped","application/x-gunzip","application/x-gzip"],tif:["image/tiff","application/tif","application/tiff","application/x-tif","application/x-tiff","image/tif","image/x-tif","image/x-tiff"],tiff:["image/tiff","application/tif","application/tiff","application/x-tif","application/x-tiff","image/tif","image/x-tif","image/x-tiff"],tnef:["application/ms-tnef"],torrent:["application/x-bittorrent"],tfm:["application/x-tex-tfm"],tr:["application/x-troff"],trm:["application/x-msterminal"],tsv:["text/tsv","text/tab-separated-values","text/x-tab-separated-values"],twb:["application/twb","application/twbx","application/x-twb"],twbx:["application/twb","application/twbx","application/x-twb"],text:["text/plain"],conf:["text/plain"],def:["text/plain"],list:["text/plain"],in:["text/plain"],txt:["text/plain"],dsc:["text/prs.lines.tag"],uls:["text/iuls"],ustar:["application/x-ustar"],vcf:["text/x-vcard"],vrml:["x-world/x-vrml"],vsd:["application/vndvisio","application/visio","application/visiodrawing","application/vsd","application/x-visio","application/x-vsd","image/x-vsd"],w3d:["application/x-director"],war:["application/x-webarchive"],wav:["audio/wav","audio/s-wav","audio/wave","audio/x-wav"],wcm:["application/vndms-works"],wdb:["application/vndms-works","application/x-msworks-wp"],wks:["application/vndms-works","application/x-msworks-wp"],wma:["audio/x-ms-wma"],wmf:["image/x-wmf","application/wmf","application/x-msmetafile","application/x-wmf","image/wmf","image/x-win-metafile"],wmv:["video/x-ms-wmv"],wmz:["application/x-ms-wmz"],wpd:["application/wordperfect","application/wordperf","application/wpd"],wps:["application/vndms-works","application/x-msworks-wp"],wri:["application/x-mswrite"],wrl:["x-world/x-vrml"],wrz:["x-world/x-vrml"],xbm:["image/x-xbitmap"],cc:["text/x-c"],cxx:["text/x-c"],hh:["text/x-c"],dic:["text/x-c"],xhtml:["text/html","application/xhtml+xml"],xla:["application/vndms-excel"],xlam:["application/vndms-exceladdinmacroEnabled12"],xlc:["application/vndms-excel"],xll:["application/vndms-excel","application/excel","application/msexcel","application/msexcell","application/x-dos_ms_excel","application/x-excel","application/x-ms-excel","application/x-msexcel","application/x-xls","application/xls"],xlm:["application/vndms-excel"],xls:["application/vndms-excel","application/excel","application/msexcel","application/msexcell","application/x-dos_ms_excel","application/x-excel","application/x-ms-excel","application/x-msexcel","application/x-xls","application/xls"],xlsb:["application/vnd.ms-excel.sheet.binary.macroEnabled.12"],xlsm:["application/vnd.ms-excel.sheet.macroEnabled.12"],xlsx:["application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],xlt:["application/vndms-excel"],xltm:["application/vndms-exceltemplatemacroEnabled12"],xltx:["application/vndopenxmlformats-officedocumentspreadsheetmltemplate"],xlw:["application/vndms-excel"],xml:["text/xml","application/x-xml","application/xml"],xpm:["image/x-xpixmap","image/x-xpm","image/xpm"],xps:["application/vndms-xpsdocument"],xsl:["text/xsl"],xwd:["image/x-xwindowdump","image/xwd","image/x-xwd","application/xwd","application/x-xwd"],"7z":["application/x-7z-compressed"],z:["application/x-compress","application/z","application/x-z"],zip:["application/zip","application/x-compress","application/x-compressed","application/x-zip","application/x-zip-compressed","application/zip-compressed","application/x-7zip-compressed"]},mimeTypesAndExt:{"text/plain":{icon:"txt",convertType:"txt"},"application/x-autocad":{icon:"dxf",convertType:"dxf"},"image/x-dwg":{icon:"dwg",convertType:"dwg"},"application/pdf":{icon:"pdf",convertType:"pdf"},"application/sla":{icon:"stl",convertType:"stl"},"application/zip":{icon:"zip",convertType:"zip"},"application/rar":{icon:"zip",convertType:"rar"},"application/photoshop":{icon:"psd",convertType:"psd"},"application/vnd.oasis.opendocument.text":{icon:"odt",convertType:"odt"},"application/vnd.oasis.opendocument.presentation":{icon:"odp",convertType:"odp"},"application/vnd.oasis.opendocument.spreadsheet":{icon:"ods",convertType:"ods"},"application/vnd.openxmlformats-officedocument.wordprocessingml.document":{icon:"doc",convertType:"docx"},"application/vnd.ms-word.document.12":{icon:"doc",convertType:"docx"},"application/vndms-word":{icon:"doc",convertType:"doc"},"application/doc":{icon:"doc",convertType:"doc"},"application/msword":{icon:"doc",convertType:"doc"},"application/msword-doc":{icon:"doc",convertType:"doc"},"application/vndmsword":{icon:"doc",convertType:"doc"},"application/winword":{icon:"doc",convertType:"doc"},"application/word":{icon:"doc",convertType:"doc"},"application/x-msw6":{icon:"doc",convertType:"doc"},"application/x-msword":{icon:"doc",convertType:"doc"},"application/x-msword-doc":{icon:"doc",convertType:"doc"},"application/vnd.openxmlformats-officedocument.presentationml.slideshow":{icon:"odp",convertType:"pptx"},"application/vnd.openxmlformats-officedocument.presentationml.presentation":{icon:"odp",convertType:"pptx"},"application/ms-powerpoint":{icon:"ppt",convertType:"ppt"},"application/mspowerpoint":{icon:"ppt",convertType:"ppt"},"application/powerpoint":{icon:"ppt",convertType:"ppt"},"application/ppt":{icon:"ppt",convertType:"ppt"},"application/vnd-mspowerpoint":{icon:"ppt",convertType:"ppt"},"application/vnd_ms-powerpoint":{icon:"ppt",convertType:"ppt"},"application/x-mspowerpoint":{icon:"ppt",convertType:"ppt"},"application/x-powerpoint":{icon:"ppt",convertType:"ppt"},"application/vnd.ms-powerpoint":{icon:"ppt",convertType:"ppt"},"application/vndms-excel":{icon:"xls",convertType:"xls"},"application/excel":{icon:"xls",convertType:"xls"},"application/msexcel":{icon:"xls",convertType:"xls"},"application/msexcell":{icon:"xls",convertType:"xls"},"application/x-dos_ms_excel":{icon:"xls",convertType:"xls"},"application/x-excel":{icon:"xls",convertType:"xls"},"application/x-ms-excel":{icon:"xls",convertType:"xls"},"application/x-msexcel":{icon:"xls",convertType:"xls"},"application/x-xls":{icon:"xls",convertType:"xls"},"application/xls":{icon:"xls",convertType:"xls"},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":{icon:"xls",convertType:"xlsx"}},getMimeTypesByExtensions:function(t){for(var e=[],a=t.length-1;0<=a;--a)e.push(this.mimeTypesMap[t[a]][0]);return e},getMimeTypesByAllExtensions:function(t){for(var e=[],a=t.length-1;0<=a;--a)for(var i=this.mimeTypesMap[t[a]].length-1;0<=i;--i)e.push(this.mimeTypesMap[t[a]][i]);return e},findRealMimeType:function(t){var e=!1,a=[];if(t&&0<t.length){for(var i in t=t.toLowerCase(),this.mimeTypesMap)a.push(i);for(var n=a.length-1;!e&&0<n;--n)(e=this.isFileType(t,this.mimeTypesMap[a[n]]))&&(e=this.mimeTypesMap[a[n]][0])}return e||""},findExtensionByMimeType:function(t){var e=this.findRealMimeType(t),a=[],i=!1;if(e&&0<e.length){for(var n in this.mimeTypesMap)a.push(n);for(var p=a.length-1;!i&&0<p;--p)(i=this.mimeTypesMap[a[p]][0]===e)&&(i=a[p])}return i},findRealMimeTypeByFileName:function(t){var e,a="";return 0<t.length&&(e=t.split(".").pop())&&0<e.length&&(e=e.toLowerCase(),a=this.mimeTypesMap[e]?this.mimeTypesMap[e][0]:""),a},isFileType:function(t,e){return 0<=e.indexOf(t)},isMimeVisorType:function(t){return this.isOfficeType(t)||this.isPDFType(t)||this.isSvgImageType(t)||this.isOpenOfficeType(t)||this.is3DSTL(t)||this.isPsd(t)||this.isCompressedType(t)||this.isTextType(t)},isTextType:function(t){return this.isFileType(t,this.mimeTypesMap.txt)},isPDFType:function(t){return this.isFileType(t,this.mimeTypesMap.pdf)},isCompressedType:function(t){return this.isFileType(t,this.mimeTypesMap.zip.concat(this.mimeTypesMap.rar.concat(this.mimeTypesMap.gz)))},isDxf:function(t){return this.isFileType(t,this.mimeTypesMap.dxf)},isDwg:function(t){return this.isFileType(t,this.mimeTypesMap.dwg)},isPsd:function(t){return this.isFileType(t,this.mimeTypesMap.psd)},isZip:function(t){return this.isFileType(t,this.mimeTypesMap.zip)},isRar:function(t){return this.isFileType(t,this.mimeTypesMap.rar)},isOpenOfficeType:function(t){return this.isFileType(t,["application/vnd.oasis.opendocument.text","application/vnd.oasis.opendocument.presentation","application/vnd.oasis.opendocument.spreadsheet"])},isOfficeType:function(t){return this.isFileType(t,["application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/msword","application/vnd.ms-powerpoint","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/x-mspowerpoint","application/excel","application/vnd.ms-excel"])},is3DSTL:function(t){return this.isFileType(t,this.mimeTypesMap.stl)},getInputConvertNameType:function(t){return!!this.mimeTypesAndExt[t]&&this.mimeTypesAndExt[t].convertType},getInputIconByNameType:function(t){return!!this.mimeTypesAndExt[t]&&this.mimeTypesAndExt[t].icon},isImageType:function(t){return this.isFileType(t,["image/x-portable-bitmap","image/jpg","image/jpeg","image/pjpeg","image/jpe","image/svg+xml","image/vnd.djvu","image/x-xcf","image/jfif","image/gif","image/jp2","image/png","image/bmp","image/tiff","image/tif"])},isSvgImageType:function(t){return this.isFileType(t,["image/svg+xml"])}},t}((arquematics=function(m){return m.codec={encodeURIData:function(t,e){return(e=e||!0)&&(t=t.replace(new RegExp("^data:(.*);base64,"),"").replace(new RegExp("^data:(.*);charset=utf-8,"),"")),encodeURIComponent(t).replace(/\-/g,"%2D").replace(/\_/g,"%5F").replace(/\./g,"%2E").replace(/\!/g,"%21").replace(/\~/g,"%7E").replace(/\*/g,"%2A").replace(/\'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29")},decodeURIData:function(t,e){(e=e||!0)&&(t=t.replace(new RegExp("^data:(.*);base64,"),"").replace(new RegExp("^data:(.*);charset=utf-8,"),""));try{return decodeURIComponent(t.replace(/\%2D/g,"-").replace(/\%5F/g,"_").replace(/\%2E/g,".").replace(/\%21/g,"!").replace(/\%7E/g,"~").replace(/\%2A/g,"*").replace(/\%27/g,"'").replace(/\%28/g,"(").replace(/\%29/g,")"))}catch(t){return""}},isDataURL:function(t){return!!t.match(/^\s*data:([a-z]+\/[a-z0-9\-\+]+(;[a-z\-]+\=[a-z0-9\-]+)?)?(;base64)?,[a-z0-9\!\$\&\'\,\(\)\*\+\,\;\=\-\.\_\~\:\@\/\?\%\s]*\s*$/i)},ArrayBuffer:{toBase64String:function(t,e){e=e||!1;for(var a="",i=new Uint8Array(t),n=i.byteLength,p=0;p<n;p++)a+=String.fromCharCode(i[p]);return e?"data:"+e+";base64,"+btoa(a):btoa(a)},stringToArrayBuffer:function(t){for(var e=new ArrayBuffer(2*t.length),a=new Uint16Array(e),i=0,n=t.length;i<n;i++)a[i]=t.charCodeAt(i);return e}},Base64:{toArrayBuffer:function(t,e){(e=e||!0)&&(t=t.replace(new RegExp("^data:(.*);base64,"),""));for(var a=m.codec.Base64.toByteCharacters(t),i=a.length,n=new Uint8Array(i),p=0;p<i;p++)n[p]=a.charCodeAt(p);return n.buffer},isBase:function(t,e){return(e=e||!0)&&(t=t.replace(new RegExp("^data:(.*);base64,"),"")),/^([A-Za-z0-9+/]{4})*([A-Za-z0-9+/]{4}|[A-Za-z0-9+/]{3}=|[A-Za-z0-9+/]{2}==)$/i.test(t)},toBlob:function(t,e,a){return new Blob(m.codec.Base64.toBytesArray(t,!0,a),{type:e})},toByteCharacters:function(e){try{return atob(e)}catch(t){return function(t){var e,a,i,n={},p=0,o=0,c="",r=String.fromCharCode,s=t.length;for(e=0;e<64;e++)n["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(e)]=e;for(a=0;a<s;a++)for(p=(p<<6)+n[t.charAt(a)],o+=6;8<=o;)((i=p>>>(o-=8)&255)||a<s-2)&&(c+=r(i));return c}(e)}},toBytesArray:function(t,e,a){a=a||512,(e=e||!0)&&(t=t.replace(new RegExp("^data:(.*);base64,"),""));for(var i=m.codec.Base64.toByteCharacters(t),n=[],p=0;p<i.length;p+=a){for(var o=i.slice(p,p+a),c=new Array(o.length),r=0;r<o.length;r++)c[r]=o.charCodeAt(r);var s=new Uint8Array(c);n.push(s)}return n},toBinary:function(t,e){(e=e||!0)&&(t=t.replace(new RegExp("^data:(.*);base64,"),""));for(var a=m.codec.Base64.toByteCharacters(t),i=new Uint8Array(a.length),n=0;n<a.length;n++)i[n]=a.charCodeAt(n);return i},_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",b64DecodeUnicode:function(t){return decodeURIComponent(Array.prototype.map.call(atob(t),function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)}).join(""))},b64EncodeUnicode:function(t){return btoa(encodeURIComponent(t).replace(/%([0-9A-F]{2})/g,function(t,e){return String.fromCharCode(parseInt(e,16))}))},encode:function(e){try{return btoa(e)}catch(t){var a,i,n,p,o,c,r,s="",l=0;for(e=m.codec.Base64._utf8_encode(e);l<e.length;)p=(a=e.charCodeAt(l++))>>2,o=(3&a)<<4|(i=e.charCodeAt(l++))>>4,c=(15&i)<<2|(n=e.charCodeAt(l++))>>6,r=63&n,isNaN(i)?c=r=64:isNaN(n)&&(r=64),s=s+this._keyStr.charAt(p)+this._keyStr.charAt(o)+this._keyStr.charAt(c)+this._keyStr.charAt(r);return s}},toString:function(e,t){(t=t||!1)&&(e=e.replace(new RegExp("^data:(.*);base64,"),""));try{return atob(e)}catch(t){var a,i,n,p,o,c,r="",s=0;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");s<e.length;)a=this._keyStr.indexOf(e.charAt(s++))<<2|(p=this._keyStr.indexOf(e.charAt(s++)))>>4,i=(15&p)<<4|(o=this._keyStr.indexOf(e.charAt(s++)))>>2,n=(3&o)<<6|(c=this._keyStr.indexOf(e.charAt(s++))),r+=String.fromCharCode(a),64!=o&&(r+=String.fromCharCode(i)),64!=c&&(r+=String.fromCharCode(n));return r=m.codec.Base64._utf8_decode(r)}},_utf8_encode:function(t){t=t.replace(/\r\n/g,"\n");for(var e="",a=0;a<t.length;a++){var i=t.charCodeAt(a);i<128?e+=String.fromCharCode(i):(127<i&&i<2048?e+=String.fromCharCode(i>>6|192):(e+=String.fromCharCode(i>>12|224),e+=String.fromCharCode(i>>6&63|128)),e+=String.fromCharCode(63&i|128))}return e},_utf8_decode:function(t){for(var e="",a=0,i=c1=c2=0;a<t.length;)(i=t.charCodeAt(a))<128?(e+=String.fromCharCode(i),a++):191<i&&i<224?(c2=t.charCodeAt(a+1),e+=String.fromCharCode((31&i)<<6|63&c2),a+=2):(c2=t.charCodeAt(a+1),c3=t.charCodeAt(a+2),e+=String.fromCharCode((15&i)<<12|(63&c2)<<6|63&c3),a+=3);return e}},HEX:{d2h:function(t){return t.toString(16)},h2d:function(t){return parseInt(t,16)},encode:function(t){for(var e="",a=0,i=t.length;a<i;a++)e+=t.charCodeAt(a).toString(16);return e},toString:function(t){var e="";if((t=t||"")&&0<t.length)for(var a=t.match(/.{1,2}/g),i=a.length,n=0;n<i;n++)e+=String.fromCharCode(parseInt(a[n],16));return e}},BIN:{toBase64Encode:function(t){for(var e,a,i,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",p="",o=0,c=t.length;o<c;){if(e=255&t.charCodeAt(o++),o==c){p+=n.charAt(e>>2),p+=n.charAt((3&e)<<4),p+="==";break}if(a=t.charCodeAt(o++),o==c){p+=n.charAt(e>>2),p+=n.charAt((3&e)<<4|(240&a)>>4),p+=n.charAt((15&a)<<2),p+="=";break}i=t.charCodeAt(o++),p+=n.charAt(e>>2),p+=n.charAt((3&e)<<4|(240&a)>>4),p+=n.charAt((15&a)<<2|(192&i)>>6),p+=n.charAt(63&i)}return p},toBitArr:function(t){if(2147483647<t||t<-2147483648)throw new TypeError("arrayFromMask - out of range");for(var e=t,a=[];e;a.push(Boolean(1&e)),e>>>=1)return a},encode:function(t){for(var e=t,a="",i=0;i<32;i++,a+=String(e>>>31),e<<=1)return a}}},m}((arquematics=function(s,p,l){var t,e;return s.uaMatch=function(t){t=t.toLowerCase();var e=/(chrome)[ \/]([\w.]+)/.exec(t)||/(webkit)[ \/]([\w.]+)/.exec(t)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(t)||/(msie) ([\w.]+)/.exec(t)||t.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(t)||[];return{browser:e[1]||"",version:e[2]||"0"}},e={},(t=s.uaMatch(navigator.userAgent)).browser&&(e[t.browser]=!0,e.version=t.version),e.chrome?e.webkit=!0:e.webkit&&(e.safari=!0),s.browser=e,s.buttonControlStatus=function(t,e){e?(t.button("reset"),setTimeout(function(){t.removeClass("disabled"),t.removeAttr("disabled")},1)):t.button("loading")},(l={config:{},crypt:!1,lang:"es",storeKey:!1,utils:{},docviews:{},ecc:!1,store:!1,codec:{},getClassFromString:function(t){for(var e=t.split("."),a=p||this,i=0,n=e.length;i<n;i++)a=a[e[i]];if("function"!=typeof a)throw new Error("function not found");return a},initEncrypt:function(e,a){try{l.crypt=l.utils.read(e+"-key","arquematics.ecc",a),l.storeKey=a}catch(t){try{l.crypt=l.utils.read(e+"-key","arquematics.ecc"),l.utils.store(e+"-key",l.crypt,a),l.storeKey=a}catch(t){}}if(!l.crypt)throw"ecc: read key: No cookie"},decryptNodeText:function(t){var e,a,i,n=t.find(".content-text"),p=t.find(".content-data"),o=t.find(".control-crypt"),c="",r="";if(!l.crypt)throw"decryptNodeText: No arquematics.crypt init";if(s.each(n,function(t){try{e=s(this),i=e.children(),0<(c=s.trim(e.data("encrypt-text"))).length&&(r=(r=(r=l.crypt.decryptHexToString(c)).replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;")).replace(new RegExp("(\r?\n)+","g"),"<br /><br />"),e.html(r),e.append(i))}catch(t){throw"decryptNodeText: ->decryptHexToString"}}),s.each(o,function(){try{a=s(this),0<(c=s.trim(a.data("encrypt-text"))).length&&(r=l.crypt.decryptHexToString(c),a.val(r))}catch(t){throw"decryptNodeText: ->decryptHexToString"}}),s.each(p,function(){try{a=s(this),0<(c=s.trim(a.data("content-enc"))).length&&(r=(r=l.crypt.decryptHexToString(c)).replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;"),a.data("content",r),a.attr("data-content",r))}catch(t){throw"decryptNodeText: ->decryptHexToString"}}),t.hasClass("content-data"))try{0<(c=s.trim(t.data("content-enc"))).length&&(r=(r=l.crypt.decryptHexToString(c)).replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;"),t.data("content",r),t.attr("data-content",r))}catch(t){throw"decryptNodeText: ->decryptHexToString"}},exception:{invalid:function(t){this.toString=function(){return"INVALID: "+this.message},this.message=t},bug:function(t){this.toString=function(){return"BUG: "+this.message},this.message=t},notReady:function(t){this.toString=function(){return"NOT READY: "+this.message},this.message=t}},randomGenerator:function(){this.value=l.utils.randomKeyString(50)}}).randomGenerator.prototype={get:function(){return this.value},set:function(t){this.value=t},generate:function(){this.value=l.utils.randomKeyString(50)}},l.context=function(t){this.currentState=!1,this.currentIndex=-1,this.lock=!1,this.states=[],this.defState=t},l.context.prototype={add:function(t){this.states.push(t)},getParams:function(){return this.params},setParams:function(t){this.params=t},findState:function(t){var e=0;if(0<this.states.length)for(e=0;e<this.states.length;e++)if(this.states[e].name===t.name)return e;return-1},change:function(t){this.currentState=t,this.currentIndex=this.findState(t),this.currentState.go(this.params)},next:function(){this.currentIndex+1<this.states.length?(this.currentIndex++,this.currentState=this.states[this.currentIndex],this.currentState.go(this.params)):this.change(this.defState)},start:function(){this.lock||(this.lock=!0,0<this.states.length?(this.currentIndex=0,this.currentState=this.states[this.currentIndex],this.currentState.go(this.params)):this.change(this.defState))}},l}(jQuery,window,arquematics||{}))||{}))||{});void 0===FileReader.prototype.readAsBinaryString&&(FileReader.prototype.readAsBinaryString=function(t){var n="",p=this,o=new FileReader;o.onload=function(t){for(var e=new Uint8Array(o.result),a=e.byteLength,i=0;i<a;i++)n+=String.fromCharCode(e[i]);p.content=n,p.onload()},o.readAsArrayBuffer(t)});arquematics=function(c,n,r){return FileReader.prototype.readAsBinaryString||(FileReader.prototype.readAsBinaryString=function(t){var n="",p=this,o=new FileReader;o.onload=function(t){for(var e=new Uint8Array(o.result),a=e.byteLength,i=0;i<a;i++)n+=String.fromCharCode(e[i]);p.content=n,$(p).trigger("onload")},o.readAsArrayBuffer(t)}),c.loader={getFileObject:function(t,e,a){var i,n=$.Deferred();return $.ajax({url:t,type:"GET",dataType:"json"}).done(function(t){i=c.simpleCrypt.decryptBase64(a,t.src),n.resolve({gui:e,blob:i})}).fail(function(){n.reject()}),n},getFileObjectURL:function(t,e,a,i){var n,p=r.URL||r.webkitURL,o=$.Deferred();return $.ajax({url:t,type:"GET",dataType:"json"}).done(function(t){n=c.simpleCrypt.decryptBase64(i,t.src),o.resolve({gui:e,guiFile:a,h:t.h,w:t.w,blob:p.createObjectURL(c.codec.Base64.toBlob(n,t.type))})}).fail(function(){o.reject()}),o},getBlob:function(t,e){var a=$.Deferred();return n.arrayBufferToBlob(t,e).then(function(t){a.resolve(t)}),a},getObjectURL:function(t,e){var a=r.URL||r.webkitURL,i=$.Deferred();return n.arrayBufferToBlob(t,e).then(function(t){i.resolve(a.createObjectURL(t))}),i},getObjectURLRAW:function(t,e){var a=r.URL||r.webkitURL,i=c.codec.ArrayBuffer.toBase64String(t,e);return a.createObjectURL(new Blob([i],{type:e}))},getObjectURLFromRAWData:function(t,e){e=e||"image/svg+xml;charset=utf-8";return(r.URL||r.webkitURL).createObjectURL(new Blob([c.codec.decodeData(t)],{type:e}))},getObjectURLFromDataURL:function(t){var e=r.URL||r.webkitURL,a=$.Deferred();return n.dataURLToBlob(t).then(function(t){a.resolve(e.createObjectURL(t))}),a},getUint8Array:function(t,e){var a=$.Deferred();return n.arrayBufferToBlob(t,e).then(function(t){n.blobToBase64String(t).then(function(t){a.resolve(c.codec.Base64.toBinary("data:"+e+";base64,"+t,!1))})}),a},getBase64String:function(t,e){var a=$.Deferred();return n.arrayBufferToBlob(t,e).then(function(t){n.blobToBase64String(t).then(function(t){a.resolve(t)})}),a},getBinaryString:function(t,e){var a=$.Deferred();return n.arrayBufferToBlob(t,e).then(function(t){var e=new FileReader;e.onload=function(t){a.resolve(t.target.result)},e.readAsBinaryString(t)}),a}},c}(arquematics||{},blobUtil,window);!function(a,t){var e;t.storage={getInstance:function(){return e||(e=a.localStorage&&null!==a.localStorage?{write:function(t,e){return a.localStorage.setItem(t,e)},read:function(t){return a.localStorage.getItem(t)},remove:function(t){a.localStorage.removeItem(t)},hasItem:function(t){return null!==this.read(t)}}:{parseCookieValue:function(t){0===t.indexOf('"')&&(t=t.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return decodeURIComponent(t.replace(/\+/g," "))}catch(t){}},write:function(t,e,a){if(a=a||!1){var i=new Date;i.setTime(i-864e5)}return document.cookie=[encodeURIComponent(t),"=",e,a?"; expires="+i.toUTCString():"; expires=Fri, 31 Dec 9999 23:59:59 GMT","; path=/","; domain="+document.domain].join("")},read:function(t){for(var e=t?void 0:{},a=document.cookie?document.cookie.split("; "):[],i=0,n=a.length;i<n;i++){var p=a[i].split("="),o=decodeURIComponent(p.shift()),c=p.join("=");if(t&&t===o){e=this.parseCookieValue(c);break}t||void 0!==(c=this.parseCookieValue(c))&&(e[o]=c)}return e},remove:function(t){return void 0!==this.read(t)&&(this.write(t,"",!0),!this.read(t))},hasItem:function(t){return new RegExp("(?:^|;\\s*)"+encodeURIComponent(t).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(document.cookie)}}),e}},t.store=t.storage.getInstance()}(window,arquematics),function(p,m){m.utils={initEncrypt:function(t,e){m.crypt=new m.ecc,m.crypt.setData(t),m.crypt.setPublicEncKeys(e)},store:function(t,e,a){if(a){var i=m.simpleCrypt.encryptHex(a,e.getData());return m.store.write(t,i)}return m.store.write(t,m.codec.HEX.encode(e.getData()))},read:function(t,e,a){var i=m.store.hasItem(t);if(i){var n=m.store.read(t),p=a?m.simpleCrypt.decryptHex(a,n):m.codec.HEX.toString(n);if("arquematics.ecc"!==e)throw new Error("Missing Obj Type: "+e);(i=new m.ecc).setData(p)}return i},wordwrap:function(t,e){if(!t)return t;var a="(.{1,"+(e=e||64)+"})( +|$\n?)|(.{1,"+e+"})";return t.match(RegExp(a,"g"))},readKeyForUser:function(t,e){var a=m.codec.HEX.encode(t.getData()),i=this.wordwrap(a);e=e||!1;return i.unshift("-----BEGIN KEY-----"),i.push("-----END KEY-----"),e?i.join("\n"):i.join("<br />")},storeKeyForUser:function(t,e){var a=e.toUpperCase().replace(/(\r\n|\n|\r)/gm,"").replace(/-/g,"").replace(/BEGIN KEY/,"").replace(/END KEY/,"").replace(/^[A-F0-9]$/gm,"").replace(/\s+/g,"");return m.store.write(t,a)},_randomKey:function(t,e){for(var a,i="",n=t=t||64;0<n;--n)(a=(a=p.random.randomWords(1,10))[0])<0&&(a*=-1),a="0."+a,a=parseFloat(a),i+=e[Math.round(a*(e.length-1))];return i},sha1:function(t){var e=p.hash.sha1.hash(t);return p.codec.hex.fromBits(e)},sha256:function(t){var e=p.hash.sha256.hash(t);return p.codec.hex.fromBits(e)},removeExtension:function(t){return t.split(".").slice(0,-1).join(".")||t+""},getFileExtension:function(t){return t.split(".").pop()},encryptDataAndSend:function(t,e,a,i){var n=a||!1,p=i||!1,o="",c="";if(n&&p){for(var r in t)(r!==n||p&&r!==p)&&(c+="&"+r+"="+t[r]);o=t[n],c+="&"+p+"="+m.utils.sha256(o)}else{for(var r in t)r!==n&&(c+="&"+r+"="+t[r]);o=t[n]}m.crypt.encryptAsynMultipleKeys(o,function(t){t=t.replace(/\"$/,"").replace(/^\"/,"").replace(/\\/g,"").replace(/\s+/g,""),c+="&"+n+"="+t,e&&"function"==typeof e&&e(c)})},encryptForm:function(t,e){for(var a,i=$.Deferred(),n="",p=t.find("input, select, textarea").serializeArray(),o=0,c=p.length;o<c;o++)p[o].name!==e.attr("name")&&(n+="&"+p[o].name+"="+p[o].value.replace(/^\s+|\s+$/gm,""));return a=e.val().replace(/^\s+|\s+$/gm,""),m.crypt.encryptAsynMultipleKeys(a,function(t){t=t.replace(/\"$/,"").replace(/^\"/,"").replace(/\\/g,"").replace(/\s+/g,""),n+="&"+e.attr("name")+"="+t,i.resolve(n)}),i},encryptArrayAndSend:function(t,e,a,i){var n,p=a||!1,o=i||!1,c="",r="",s=0;if(p&&i){for(s=0,n=t.length;s<n;s++)(t[s].name!==p.attr("name")||o&&t[s].name!==o.attr("name"))&&(r+="&"+t[s].name+"="+t[s].value.replace(/^\s+|\s+$/gm,""));c=p.val().replace(/^\s+|\s+$/gm,""),r+="&"+o.attr("name")+"="+m.utils.sha256(c)}else{for(s=0,n=t.length;s<n;s++)t[s].name!==p.attr("name")&&(r+="&"+t[s].name+"="+t[s].value.replace(/^\s+|\s+$/gm,""));c=p.val().replace(/^\s+|\s+$/gm,"")}m.crypt.encryptAsynMultipleKeys(c,function(t){t=t.replace(/\"$/,"").replace(/^\"/,"").replace(/\\/g,"").replace(/\s+/g,""),r+="&"+a.attr("name")+"="+t,e&&"function"==typeof e&&e(r)})},encryptFormAndSend:function(t,e,a,i){m.utils.encryptArrayAndSend(t.find("input, select, textarea").serializeArray(),e,a,i)},prepareFormAndSend:function(t,e,a,i){var n=a||!1,p=i||!1,o="",c="";if(n&&i){for(var r=t.find("input, select, textarea").serializeArray(),s=0,l=r.length;s<l;s++)r[s].name!==p.attr("name")&&(c+="&"+r[s].name+"="+r[s].value.replace(/^\s+|\s+$/gm,""));o=n.val().replace(/^\s+|\s+$/gm,""),c+="&"+p.attr("name")+"="+m.utils.sha256(o)}else c=t.find("input, select, textarea").serialize();e&&"function"==typeof e&&e(c)},randomKeyString:function(t){return this._randomKey(t,"0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ")},randomKeyHexString:function(t){return this._randomKey(t,"012345678abcdef")},getParamFromUrl:function(t,e){return decodeURIComponent((new RegExp("[?|&]"+e+"=([^&;]+?)(&|#|;|$)").exec(t)||[,""])[1].replace(/\+/g,"%20"))||null},getParamUrl:function(t){return m.utils.getParamFromUrl(location.search,t)},parseURL:function(t){var e,a,i,n=document.createElement("a"),p={};for(n.href=t,e=n.search.replace(/^\?/,"").split("&"),i=0;i<e.length;i++)p[(a=e[i].split("="))[0]]=a[1];return{protocol:n.protocol,host:n.host,hostname:n.hostname,port:n.port,pathname:n.pathname,search:n.search,searchObject:p,hash:n.hash}},inArray:function(t,e,a){var i=0;if(0<a.length)for(i=0;i<a.length;i++)for(e in a[i])if(this[e]===t)return i;return-1},showSpin:function(t,e,a){var i=0,n=0,p=1/Math.round(100/9);e.hide(),t.show(),a.css("color","#FFF"),setInterval(function(){n+=24,18<=(i+=1)&&(i=n=0),t.css("backgroundPosition",-n+"px 0")},1e3*p)}}}(sjcl,arquematics),function(n,m){var p=t("elGamal"),o=t("ecdsa"),c=function(t){var e=n.hash[t];if(!e)throw new arquematis.exception.notReady("Missing hash algorithm: "+t);return{hash:function(t){return e.hash(t)}}}("sha256");function t(t){var a=n.ecc[t];if(!a)throw new Error("Missing ECC algorithm: "+t);return{generate:function(t){var e=a.generateKeys(t,1);return e.pub.$curve=t,e.sec.$curve=t,e},importPublicHex:function(t,e){return new a.publicKey(n.ecc.curves["c"+e],n.codec.hex.toBits(t))},importSecretHex:function(t,e){return new a.secretKey(n.ecc.curves["c"+e],new n.bn(t))}}}function i(t){var e=t.get();return n.codec.hex.fromBits(e.x)+n.codec.hex.fromBits(e.y)}function r(t){return n.codec.hex.fromBits(t.get())}m.ecc=function(){if(!(this instanceof m.ecc))throw new arquematis.exception.invalid("arquematics.ecc:Constructor called as a function");this.keys=!1,this.encryptKeys=!1,this.cache={enc:{},dec:{},sig:{},ver:{}}},m.ecc.prototype={generate:function(t){var e,a;return this.curve=t||192,e=p.generate(this.curve),a=o.generate(this.curve),this.keys={pub:i(e.pub),sec:r(e.sec),ver:i(a.pub),sig:r(a.sec)},this.keys},encryptAsynMultipleKeys:function(i,n,t,e){var p,o,c=this,r=[],s=t||this.encryptKeys,l=e||15;p=function(t,e,a){var i=c.encrypt(t,e[a].public_key),n=m.codec.HEX.encode(JSON.stringify(i));r.push({id:e[a].id,data:n})},o=0,function t(){for(var e=Math.min(o+l,s.length),a=o;a<e;a++)p(i,s,a);(o+=l)<s.length?setTimeout(t,20):n&&"function"==typeof n&&n(JSON.stringify(r))}()},encryptMultipleKeys:function(t,e){var a=[],i=e||this.encryptKeys;if(void 0!==i&&i&&void 0!==t&&0<i.length&&0<t.length)for(var n={},p="",o=0,c=i.length;o<c;o++)n=this.encrypt(t,i[o].public_key),p=m.codec.HEX.encode(JSON.stringify(n)),a.push({id:i[o].id,data:p});return JSON.stringify(a)},encrypt:function(t,e){e=e||this.keys.pub;var a=this.cache.enc[e];a||((a=this.cache.enc[e]=p.importPublicHex(e,this.curve).kem()).tagHex=n.codec.hex.fromBits(a.tag));var i=n.encrypt(a.key,t);return i.tag=a.tagHex,i},decrypt:function(t,e){e=e||this.keys.sec;var a=this.cache.dec[e];a||((a=this.cache.dec[e]=p.importSecretHex(e,this.curve)).$keys={});var i=a.$keys[t.tag];return i||(i=a.$keys[t.tag]=a.unkem(n.codec.hex.toBits(t.tag))),n.decrypt(i,t)},decryptHexToString:function(t,e){var a=m.codec.HEX.toString(t);return this.decrypt(JSON.parse(a),e)},sign:function(t,e,a){e=e||this.keys.sig;var i=this.cache.sig[e];return i||(i=this.cache.sig[e]=o.importSecretHex(e,this.curve)),!1!==a&&(t=c.hash(t)),i.sign(t)},verify:function(t,e,a,i){a=a||this.keys.ver;var n=this.cache.ver[a];n||(n=this.cache.ver[a]=o.importPublicHex(a,this.curve)),!1!==i&&(e=c.hash(e));try{return n.verify(e,t)}catch(t){return!1}},getPublicKey:function(){return this.keys.pub},getPrivatekey:function(){return this.keys.sec},getVerifykey:function(){return this.keys.ver},getSigkey:function(){return this.keys.sig},getPublicEncKeys:function(){return this.encryptKeys},setPublicEncKeys:function(t){this.encryptKeys=t},getData:function(){return this.curve+"|"+this.keys.pub+"|"+this.keys.sec+"|"+this.keys.ver+"|"+this.keys.sig},setData:function(t){var e=t.split("|");if(!(this.isArray(e)&&4<=e.length))throw new Error("Error setData: "+objName);this.curve=parseInt(e[0]),this.keys={pub:e[1],sec:e[2],ver:e[3],sig:e[4]}},isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)}},m.simpleCrypt={decrypt:function(t,e){return e&&0!==e.length?n.decrypt(t,JSON.parse(e)):e},decryptObj:function(t,e){for(var a in e)e.hasOwnProperty(a)&&(e[a]=m.simpleCrypt.decryptHex(t,e[a]));return e},decryptHex:function(t,e){if(!e||0===e.length)return e;var a=JSON.parse(m.codec.HEX.toString(e));return n.decrypt(t,a)},decryptBase64:function(t,e){return e&&0!==e.length?n.decrypt(t,JSON.parse(m.codec.Base64.toString(e))):e},encryptHex:function(t,e){var a=n.codec.hex.fromBits(n.random.randomWords("10","0")),i=JSON.stringify(n.encrypt(t,e,{count:2048,salt:a,ks:256}));return m.codec.HEX.encode(i)},encryptBase64:function(t,e){var a=n.codec.hex.fromBits(n.random.randomWords("10","0")),i=JSON.stringify(n.encrypt(t,e,{count:2048,salt:a,ks:256}));return m.codec.Base64.encode(i)},encrypt:function(t,e){var a=n.codec.hex.fromBits(n.random.randomWords("10","0"));return JSON.stringify(n.encrypt(t,e,{count:2048,salt:a,ks:256}))},encryptObj:function(t,e){for(var a in e)e.hasOwnProperty(a)&&(e[a]=m.simpleCrypt.encryptHex(t,e[a]));return e}}}(sjcl,arquematics);
